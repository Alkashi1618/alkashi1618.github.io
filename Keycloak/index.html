<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mise en place de Keycloak - Authentification Centralis√©e SSO</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.8;
            color: #333;
            background: #f8f9fa;
        }

        /* Navigation */
        .navbar {
            background: rgba(255, 255, 255, 0.98);
            padding: 15px 0;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar a {
            color: #1e3c72;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .navbar a:hover {
            color: #0BCEAF;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 80px 20px 60px;
            text-align: center;
        }

        .hero h1 {
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero .subtitle {
            font-size: 1.3em;
            opacity: 0.95;
            margin-bottom: 30px;
        }

        .badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .badge {
            background: white;
            color: #1e3c72;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }

        /* Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .content {
            background: white;
            margin: -40px auto 50px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .section {
            padding: 50px;
        }

        .section:nth-child(even) {
            background: #f8f9fa;
        }

        .section h2 {
            color: #1e3c72;
            font-size: 2em;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #0BCEAF;
        }

        .section h3 {
            color: #2a5298;
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .section h4 {
            color: #1e3c72;
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .section p, .section li {
            margin-bottom: 15px;
            text-align: justify;
        }

        .section ul, .section ol {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        /* Code Block */
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
        }

        /* Info Boxes */
        .info-box {
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 5px solid #ff9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .success-box {
            background: #e8f5e9;
            border-left: 5px solid #4caf50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        /* Grid Layout */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .card h4 {
            color: #1e3c72;
            margin-bottom: 15px;
        }

        /* Tech Stack */
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .tech-tag {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 18px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }

        /* Footer */
        footer {
            background: #1e3c72;
            color: white;
            text-align: center;
            padding: 30px 20px;
            margin-top: 50px;
        }

        footer a {
            color: #0BCEAF;
            text-decoration: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2em;
            }
            .section {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a href="../index.html#portfolio">
                <i class="fas fa-arrow-left"></i> Retour au Portfolio
            </a>
            <a href="https://github.com/alkashi1618" target="_blank">
                <i class="fab fa-github"></i> GitHub
            </a>
        </div>
    </nav>

    <!-- Hero -->
    <div class="hero">
        <h1>üîê Syst√®me d'Authentification Centralis√©e avec Keycloak</h1>
        <p class="subtitle">Mise en place d'un SSO s√©curis√© avec OAuth2 & OpenID Connect</p>
        <div class="badges">
            <span class="badge">Lab Pratique</span>
            <span class="badge">Keycloak 24.0.3</span>
            <span class="badge">OAuth2 / OIDC</span>
            <span class="badge">Docker</span>
        </div>
    </div>

    <!-- Content -->
    <div class="container">
        <div class="content">
            
            <!-- Introduction -->
            <section class="section">
                <h2>üìã Introduction</h2>
                <p>Dans le cadre de la s√©curisation et de la centralisation de l'acc√®s aux diff√©rentes applications internes, ce laboratoire vise √† mettre en place une solution d'authentification unifi√©e bas√©e sur <strong>Keycloak</strong>. L'objectif est de comprendre le fonctionnement d'un syst√®me <strong>SSO (Single Sign-On)</strong> avec les protocoles <strong>OAuth2</strong> et <strong>OpenID Connect</strong>.</p>
                
                <div class="info-box">
                    <strong>üéØ Objectif du TP</strong><br>
                    Mettre en place un syst√®me d'authentification centralis√© permettant aux diff√©rentes applications web de d√©l√©guer l'authentification √† un serveur Keycloak. Comprendre les r√¥les OAuth2, les flux de connexion s√©curis√©s (Authorization Code + PKCE) et la gestion des utilisateurs, r√¥les et clients.
                </div>
            </section>

            <!-- Installation -->
            <section class="section">
                <h2>‚öôÔ∏è Partie 1 ‚Äì Installation de Keycloak</h2>
                
                <h3>Installation via Docker</h3>
                <p>Keycloak peut √™tre d√©ploy√© rapidement gr√¢ce √† Docker. Cette m√©thode permet une mise en place rapide pour des environnements de d√©veloppement ou de test.</p>
                
                <div class="code-block">docker run -p 8080:8080 \
  -e KEYCLOAK_ADMIN=admin \
  -e KEYCLOAK_ADMIN_PASSWORD=admin \
  quay.io/keycloak/keycloak:24.0.3 start-dev</div>

                <div class="warning-box">
                    <strong>‚ö†Ô∏è Note importante :</strong> Cette commande lance Keycloak en mode d√©veloppement. Pour la production, une configuration plus robuste avec base de donn√©es externe est recommand√©e.
                </div>

                <p>Une fois d√©marr√©, Keycloak est accessible √† l'adresse : <code>http://localhost:8080</code></p>
            </section>

            <!-- Configuration -->
            <section class="section">
                <h2>üîß Partie 2 ‚Äì Configuration de Keycloak</h2>
                
                <div class="grid-2">
                    <div class="card">
                        <h4>√âtape 1 : Cr√©ation du Realm</h4>
                        <p>Un <strong>Realm</strong> est un espace isol√© pour g√©rer utilisateurs, r√¥les et applications.</p>
                        <ul>
                            <li>Nom du realm : <code>tdsi</code></li>
                            <li>Isolement complet des configurations</li>
                            <li>Gestion ind√©pendante des utilisateurs</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>√âtape 2 : Cr√©ation des utilisateurs</h4>
                        <p>Configuration de comptes utilisateurs pour tester l'authentification.</p>
                        <ul>
                            <li><strong>Alice</strong> : Utilisateur standard</li>
                            <li><strong>Bob</strong> : Utilisateur avec privil√®ges</li>
                            <li>D√©finition des mots de passe</li>
                        </ul>
                    </div>
                </div>

                <h3>√âtape 3 : Attribution des r√¥les</h3>
                <p>Les r√¥les permettent de contr√¥ler finement les acc√®s aux ressources :</p>
                <ul>
                    <li><strong>user</strong> : Acc√®s de base aux applications</li>
                    <li><strong>admin</strong> : Acc√®s administratif complet</li>
                </ul>
            </section>

            <!-- Clients -->
            <section class="section">
                <h2>üñ•Ô∏è Partie 3 ‚Äì Cr√©ation et configuration des clients</h2>
                
                <p>Dans Keycloak, un <strong>client</strong> repr√©sente une application qui souhaite utiliser l'authentification centralis√©e. Deux types de clients ont √©t√© configur√©s :</p>

                <div class="grid-2">
                    <div class="card">
                        <h4>üì± Client : backend-api</h4>
                        <p><strong>Type :</strong> Confidential</p>
                        <ul>
                            <li>Peut stocker un secret s√©curis√©</li>
                            <li>Service Accounts Enabled = ON</li>
                            <li>Utilis√© pour les applications serveur</li>
                            <li>Authentification machine-to-machine</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>üì± Client : mobile-app</h4>
                        <p><strong>Type :</strong> Public</p>
                        <ul>
                            <li>Ne peut pas stocker de secret</li>
                            <li>Standard Flow + PKCE activ√©</li>
                            <li>Utilis√© pour applications mobiles/SPA</li>
                            <li>S√©curit√© renforc√©e via PKCE</li>
                        </ul>
                    </div>
                </div>

                <div class="success-box">
                    <strong>‚úÖ PKCE (Proof Key for Code Exchange)</strong><br>
                    Extension de s√©curit√© pour OAuth2 qui prot√®ge contre les attaques d'interception du code d'autorisation, particuli√®rement importante pour les applications publiques.
                </div>
            </section>

            <!-- Tests -->
            <section class="section">
                <h2>üß™ Partie 4 ‚Äì Test de l'authentification</h2>
                
                <h3>1. Lancement de l'API Node.js</h3>
                <p>L'API backend est s√©curis√©e par Keycloak et n√©cessite un token valide pour acc√©der aux ressources prot√©g√©es.</p>

                <h3>2. Test avec Postman (Authorization Code + PKCE)</h3>
                <p>Le flux Authorization Code avec PKCE se d√©roule en plusieurs √©tapes :</p>
                <ol>
                    <li>L'application g√©n√®re un <code>code_verifier</code> et un <code>code_challenge</code></li>
                    <li>Redirection vers Keycloak pour l'authentification</li>
                    <li>Keycloak retourne un code d'autorisation</li>
                    <li>√âchange du code contre un access token</li>
                    <li>Utilisation du token pour acc√©der aux ressources</li>
                </ol>

                <h3>3. Appel de l'API prot√©g√©e</h3>
                <div class="code-block">curl -X GET https://api.example.com/protected \
  -H "Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6..."</div>

                <div class="tech-stack">
                    <span class="tech-tag">Bearer Token</span>
                    <span class="tech-tag">JWT</span>
                    <span class="tech-tag">OAuth2</span>
                </div>
            </section>

            <!-- Analyse -->
            <section class="section">
                <h2>üîç Partie 5 ‚Äì Analyse et compr√©hension</h2>
                
                <h3>1. Diff√©rence entre OAuth2 et OpenID Connect</h3>
                <div class="grid-2">
                    <div class="card">
                        <h4>OAuth2</h4>
                        <p>Protocole d'<strong>autorisation</strong> permettant √† une application d'acc√©der √† des ressources sans transmettre le mot de passe utilisateur.</p>
                        <ul>
                            <li>D√©livre un <code>access_token</code></li>
                            <li>Focus sur l'autorisation d'acc√®s</li>
                            <li>D√©l√©gation de permissions</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>OpenID Connect (OIDC)</h4>
                        <p>Couche d'<strong>authentification</strong> au-dessus d'OAuth2. Permet de v√©rifier l'identit√© de l'utilisateur.</p>
                        <ul>
                            <li>D√©livre un <code>id_token</code> (JWT)</li>
                            <li>Contient les infos d'identit√©</li>
                            <li>SSO et f√©d√©ration d'identit√©s</li>
                        </ul>
                    </div>
                </div>

                <h3>2. Contenu d'un JWT (JSON Web Token)</h3>
                <p>Un JWT est compos√© de trois parties s√©par√©es par des points :</p>
                
                <div class="info-box">
                    <h4>Structure d'un JWT</h4>
                    <p><strong>Header</strong> : Sp√©cifie l'algorithme de signature et le type du jeton (ex: RS256)</p>
                    <p><strong>Payload</strong> : Contient les <em>claims</em> - donn√©es sur l'utilisateur, ses r√¥les, permissions, expiration, etc.</p>
                    <p><strong>Signature</strong> : Permet de valider l'int√©grit√© du jeton et garantit qu'il n'a pas √©t√© modifi√©</p>
                </div>

                <div class="code-block">eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.
eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkFsaWNlIiwicm9sZXMiOlsidXNlciJdfQ.
SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</div>

                <h3>3. V√©rification des permissions par Keycloak</h3>
                <p>Keycloak attribue √† chaque utilisateur authentifi√© un <strong>JWT (access_token)</strong> contenant :</p>
                <ul>
                    <li>L'identit√© de l'utilisateur (sub, email, nom)</li>
                    <li>Ses r√¥les (user, admin, etc.)</li>
                    <li>Ses permissions et scopes</li>
                    <li>La date d'expiration du token</li>
                </ul>

                <p>Les applications ou APIs consultent ce token pour d√©terminer si l'utilisateur poss√®de les droits suffisants. La v√©rification se fait via :</p>
                <ol>
                    <li>D√©codage du JWT</li>
                    <li>V√©rification de la signature</li>
                    <li>Contr√¥le de l'expiration</li>
                    <li>Inspection des r√¥les et claims</li>
                </ol>
            </section>

            <!-- R√©sum√© Keycloak -->
            <section class="section">
                <h2>üìö R√©sum√© : Keycloak en profondeur</h2>
                
                <h3>1Ô∏è‚É£ Keycloak ‚Äì C'est quoi ?</h3>
                <p>Keycloak est une solution open-source de <strong>gestion des identit√©s et des acc√®s (IAM)</strong>. Il permet de centraliser l'authentification et l'autorisation des utilisateurs pour diverses applications web, API ou mobiles.</p>

                <div class="success-box">
                    <h4>Fonctionnalit√©s principales</h4>
                    <ul>
                        <li><strong>Authentification centralis√©e</strong> : SSO - une seule connexion pour toutes les apps</li>
                        <li><strong>Gestion des utilisateurs</strong> : CRUD complet, r√¥les et groupes</li>
                        <li><strong>Protocoles standards</strong> : OAuth2, OpenID Connect, SAML 2.0</li>
                        <li><strong>S√©curit√© avanc√©e</strong> : 2FA, WebAuthn, OTP</li>
                        <li><strong>F√©d√©ration d'identit√©s</strong> : Connexion via Google, Facebook, Azure AD</li>
                        <li><strong>Jetons JWT</strong> : S√©curisation des √©changes client-serveur</li>
                    </ul>
                </div>

                <h3>2Ô∏è‚É£ Comment l'utiliser ?</h3>
                <div class="grid-2">
                    <div class="card">
                        <h4>√âtapes de configuration</h4>
                        <ol>
                            <li>Installation (Docker, serveur)</li>
                            <li>Cr√©ation d'un Realm</li>
                            <li>Gestion des utilisateurs</li>
                            <li>Cr√©ation des r√¥les</li>
                            <li>Configuration des clients</li>
                            <li>Test et int√©gration</li>
                        </ol>
                    </div>

                    <div class="card">
                        <h4>Types de clients</h4>
                        <ul>
                            <li><strong>Public</strong> : Mobile, SPA (sans secret)</li>
                            <li><strong>Confidentiel</strong> : Backend, API (avec secret)</li>
                            <li>Flows OAuth2 configurables</li>
                            <li>Support PKCE pour s√©curit√© renforc√©e</li>
                        </ul>
                    </div>
                </div>

                <h3>3Ô∏è‚É£ Pourquoi l'utiliser ?</h3>
                <div class="tech-stack">
                    <span class="tech-tag">Centralisation</span>
                    <span class="tech-tag">S√©curit√©</span>
                    <span class="tech-tag">SSO</span>
                    <span class="tech-tag">Standards</span>
                    <span class="tech-tag">Scalabilit√©</span>
                </div>

                <ul>
                    <li>‚úÖ <strong>Centralisation</strong> : Un syst√®me d'auth unique pour toutes les apps</li>
                    <li>‚úÖ <strong>S√©curit√© renforc√©e</strong> : Mots de passe jamais partag√©s, support 2FA</li>
                    <li>‚úÖ <strong>Contr√¥le fin</strong> : Gestion granulaire des permissions</li>
                    <li>‚úÖ <strong>Interop√©rabilit√©</strong> : Standards OAuth2, OIDC, SAML</li>
                    <li>‚úÖ <strong>Exp√©rience utilisateur</strong> : SSO simplifie la vie des utilisateurs</li>
                    <li>‚úÖ <strong>Scalabilit√©</strong> : Parfait pour microservices et grandes infrastructures</li>
                </ul>

                <h3>4Ô∏è‚É£ O√π l'utiliser ?</h3>
                <p>Keycloak est adapt√© pour :</p>
                <ul>
                    <li>Entreprises avec multiples applications internes/externes</li>
                    <li>Projets n√©cessitant SSO pour am√©liorer s√©curit√© et UX</li>
                    <li>Applications mobiles ou web avec APIs s√©curis√©es</li>
                    <li>Sc√©narios o√π des tiers doivent acc√©der √† des ressources</li>
                    <li>Organisations n√©cessitant r√¥les, permissions et audit centralis√©s</li>
                </ul>
            </section>

            <!-- Int√©gration -->
            <section class="section">
                <h2>üîÑ Int√©gration de Keycloak dans votre infrastructure</h2>
                
                <h3>√âtapes d'int√©gration</h3>
                <ol>
                    <li><strong>D√©ploiement</strong> : Installation sur serveur ou conteneur Docker</li>
                    <li><strong>Cr√©ation Realm</strong> : Espace isol√© pour vos applications</li>
                    <li><strong>Utilisateurs & R√¥les</strong> : Configuration des comptes et permissions</li>
                    <li><strong>Enregistrement des clients</strong> :
                        <ul>
                            <li>Public : Front-end (SPA, mobile)</li>
                            <li>Confidentiel : Backend, API</li>
                        </ul>
                    </li>
                    <li><strong>Configuration OAuth2/OIDC</strong> : Authorization Code, PKCE, Client Credentials</li>
                    <li><strong>Int√©gration applicative</strong> : Utilisation des libs Keycloak ou OAuth2</li>
                    <li><strong>Validation serveur</strong> : V√©rification JWT, r√¥les, et droits</li>
                    <li><strong>Gestion & Audit</strong> : Centralisation des acc√®s et monitoring</li>
                </ol>

                <div class="info-box">
                    <strong>üí° Conseil d'architecture</strong><br>
                    Keycloak agit comme un serveur d'identit√© centralis√©, interfac√© avec vos applications via des protocoles standards. Cela simplifie la s√©curit√© et l'administration de votre syst√®me informatique.
                </div>
            </section>

            <!-- Conclusion -->
            <section class="section">
                <h2>üéØ Conclusion</h2>
                <p>Ce mini LAB a permis de comprendre la mise en place d'un serveur d'identit√© Keycloak et l'int√©gration d'un syst√®me d'authentification centralis√© bas√© sur les standards <strong>OAuth2</strong> et <strong>OpenID Connect</strong>.</p>

                <p>La configuration des r√¥les, utilisateurs, clients et des flux PKCE permet d'assurer un <strong>haut niveau de s√©curit√©</strong> tout en simplifiant la gestion des acc√®s.</p>

                <div class="success-box">
                    <h4>‚úÖ Comp√©tences acquises</h4>
                    <ul>
                        <li>Installation et configuration de Keycloak</li>
                        <li>Compr√©hension OAuth2 vs OpenID Connect</li>
                        <li>Gestion des realms, utilisateurs et r√¥les</li>
                        <li>Configuration de clients Public et Confidentiel</li>
                        <li>Impl√©mentation du flow PKCE</li>
                        <li>Manipulation et validation de JWT</li>
                        <li>S√©curisation d'APIs avec tokens</li>
                    </ul>
                </div>

                <div class="tech-stack">
                    <span class="tech-tag">Keycloak</span>
                    <span class="tech-tag">OAuth2</span>
                    <span class="tech-tag">OIDC</span>
                    <span class="tech-tag">SSO</span>
                    <span class="tech-tag">JWT</span>
                    <span class="tech-tag">PKCE</span>
                    <span class="tech-tag">IAM</span>
                </div>
            </section>

        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024-2025 Ousmane DEME | <a href="../index.html">Portfolio</a> | <a href="https://www.linkedin.com/in/ousmane-deme1618" target="_blank">LinkedIn</a></p>
    </footer>

</body>
</html>
